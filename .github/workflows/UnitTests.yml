# REF: https://github.com/okeeffed/hello-pytest-github-actions/blob/main/.github/workflows/pytest.yml
name: Unit Tests

on:
  pull_request:
    types: ["opened", "edited", "reopened", "synchronize"]

jobs:
  Unit-Tests:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    
    steps:
      - name: Check out repository code
        uses: actions/checkout@v2

      # Setup Python (faster than using Python container)
      - name: Setup/Install Python
        uses: actions/setup-python@v2
        with:
          python-version: "3.8"

      # - name: Install pipenv
      #   run: |
      #     python -m pip install --upgrade pipenv wheel
      # - id: cache-pipenv
      #   uses: actions/cache@v1
      #   with:
      #     path: ~/.local/share/virtualenvs
      #     key: ${{ runner.os }}-pipenv-${{ hashFiles('**/Pipfile.lock') }}

      - name: Install dependencies
        # if: steps.cache-pipenv.outputs.cache-hit != 'true'
        run: |
          pip install -t ./requirements_test.txt
      - name: Run tests suite
        run: |
          pytest --cove=. tests/